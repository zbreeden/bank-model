<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Bank ‚Äî Delivery Dashboard</title>
  <meta name="description" content="The Bank: a calm, exec-friendly delivery flow (WIP caps, lead/cycle time, throughput, defect escape)." />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root { --bg:#0c0d0f; --fg:#e9eaed; --card:#15171a; --muted:#9aa0a6; --border:#2a2d33; --accent:#4c8bf5; }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;line-height:1.5;color:var(--fg);background:var(--bg)}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:960px;margin:0 auto;padding:24px}
    .top{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
    h1{font-size:clamp(24px,3vw,36px);margin:8px 0 0}
    .muted{color:var(--muted)}
    .btn{display:inline-block;padding:10px 16px;border-radius:12px;border:1px solid var(--border);background:var(--card);color:var(--fg);cursor:pointer}
    .btn:hover{border-color:var(--accent)}
    .btn-cta{border-color:var(--accent);font-weight:600}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:18px;margin-top:16px}
    .grid{display:grid;gap:16px}
    .flash{outline:2px solid var(--accent);border-radius:12px}

    /* Overlays (splash, toolkit, dashboard) */
    .overlay{position:fixed;inset:0;background:rgba(12,13,15,.96);display:none;align-items:center;justify-content:center;z-index:9999}
    .overlay-card{max-width:980px;margin:24px;padding:28px;border-radius:18px;background:var(--card);border:1px solid var(--border);box-shadow:0 10px 40px rgba(0,0,0,.4)}
    .overlay h2{margin:0 0 8px;font-size:clamp(22px,3vw,32px)}
    .overlay .lead{font-size:clamp(18px,2.2vw,24px);font-weight:600}
    .overlay .sub{color:var(--muted);font-size:.95rem}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:16px}

    /* Toolkit list in spotlight */
    .toolkit-list{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px;margin-top:12px}
    .toolkit-item{border:1px solid var(--border);border-radius:14px;padding:12px;background:rgba(255,255,255,.02)}
    .toolkit-item b{display:block;margin-bottom:4px}

    /* Synth dashboard layout */
    .dash-grid{display:grid;grid-template-columns:repeat(4,minmax(160px,1fr));gap:12px;margin:16px 0}
    .kpi{border:1px solid var(--border);border-radius:14px;padding:12px;background:rgba(255,255,255,.02)}
    .kpi .label{font-size:.85rem;color:var(--muted)}
    .kpi .value{font-size:1.6rem;font-weight:700;margin:6px 0}
    .kpi .subv{font-size:.85rem;color:var(--muted)}
    .dash-rows{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .mini{padding:12px}
    .bars{display:grid;gap:8px;margin-top:8px}
    .bar{height:10px;background:linear-gradient(90deg,var(--accent),transparent);border-radius:6px}
    .legend{display:flex;justify-content:space-between;font-size:.85rem;color:var(--muted);margin-top:6px}

    /* Tiny sparkline */
    .spark{display:block;width:100%;height:46px}
    .spark path{fill:none;stroke:var(--accent);stroke-width:2}

    /* Quick "lights on" stage effect */
    .theater{position:fixed;inset:0;pointer-events:none;background:radial-gradient(ellipse at 50% 50%, rgba(255,255,255,.06), rgba(0,0,0,.92) 60%);opacity:0;transition:opacity 160ms ease-out;z-index:9998}
    .theater.show{opacity:1;animation:lightsUp 560ms ease-out forwards}
    @keyframes lightsUp { from{opacity:.9} to{opacity:0} }

    .glow{box-shadow:0 0 0 2px var(--accent) inset, 0 0 24px rgba(76,139,245,.45);transition:box-shadow 900ms ease}
    @media (max-width:860px){ .dash-grid{grid-template-columns:repeat(2,minmax(160px,1fr))} .dash-rows{grid-template-columns:1fr} }
  </style>

  <script defer>
    // Smooth scroll + highlight; safe if target missing
    function _go(id) {
      const el = document.getElementById(id);
      if (!el) { location.hash = '#' + id; return; }
      el.scrollIntoView({ behavior: 'smooth', block: 'start' });
      const card = el.querySelector('.card') || el;
      card.classList.add('glow');
      setTimeout(()=> card.classList.remove('glow'), 900);
    }

    // Mission splash
    function _showSplash(){ const s = document.getElementById('splash'); if (s) s.style.display = 'flex'; }
    function _closeSplash(){ const s = document.getElementById('splash'); if (s) s.style.display = 'none'; }
    function _continueToElevator(){ _closeSplash(); _go('elevator'); }

    // Toolkit spotlight
    function _showToolkit(){ const t = document.getElementById('toolkit'); if (t) t.style.display = 'flex'; }
    function _closeToolkit(){ const t = document.getElementById('toolkit'); if (t) t.style.display = 'none'; }

    // Synth dashboard (NEW)
    function _showDash(){
      const d = document.getElementById('dash'); if (!d) return;
      // (Optional) light random wiggle to feel alive
      try {
        const r = (min,max)=> (Math.random()*(max-min)+min);
        document.getElementById('kpi-wip').querySelector('.value').textContent = `${Math.round(r(22,28))} / 24`;
        document.getElementById('kpi-lead').querySelector('.value').textContent = `${r(2.4,3.4).toFixed(1)} days`;
        document.getElementById('kpi-throughput').querySelector('.value').textContent = `${Math.round(r(10,14))}/wk`;
        document.getElementById('kpi-escape').querySelector('.value').textContent = `${r(1.6,2.4).toFixed(1)}%`;
        // Update bars (stage durations)
        const stages=[['Intake',0.8],['Review',0.34],['UAT',0.22],['Deploy',0.12]];
        const barWrap=document.getElementById('stage-bars'); barWrap.innerHTML='';
        stages.forEach(([name,frac])=>{
          const row=document.createElement('div');
          row.innerHTML=`<div class="legend"><span>${name}</span><span>${(frac*10).toFixed(1)}d</span></div>
            <div class="bar" style="width:${Math.max(8,frac*100)}%"></div>`;
          barWrap.appendChild(row);
        });
        // Update sparkline path
        const pts = Array.from({length:12},(_,i)=>({x: i*28+6, y: 36 - (Math.sin(i/2)+1)*14 - (i>7?4:0)}));
        const dPath = 'M '+pts.map(p=>`${p.x},${p.y}`).join(' L ');
        document.getElementById('spark-path').setAttribute('d', dPath);
      } catch(e){}
      d.style.display='flex';
    }
    function _closeDash(){ const d = document.getElementById('dash'); if (d) d.style.display='none'; }

    // Theater "lights on"
    function _igniteAndGo(id){
      const theater = document.getElementById('theater');
      if (theater){ theater.classList.add('show'); setTimeout(()=> theater.classList.remove('show'), 620); }
      _go(id);
    }

    function _continueFromDash(){ _closeDash(); _igniteAndGo('delivery-toolkit'); }
    function _skipDash(){ _closeDash(); _go('delivery-toolkit'); }

    // Expose for inline handlers
    window.go=_go;
    window.showSplash=_showSplash; window.closeSplash=_closeSplash; window.continueToElevator=_continueToElevator;
    window.showToolkit=_showToolkit; window.closeToolkit=_closeToolkit;
    window.showDash=_showDash; window.closeDash=_closeDash; window.continueFromDash=_continueFromDash; window.skipDash=_skipDash;
    window.igniteAndGo=_igniteAndGo;

    window.addEventListener('DOMContentLoaded', () => {
      if (location.hash === '#demo-start') { _go('demo-start'); }
    });
  </script>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div>
        <h1>The Bank</h1>
        <div class="muted">Delivery heartbeat: WIP caps, lead/cycle time, throughput, defect escape.</div>
      </div>
      <div>
        <a class="btn" href="https://zbreeden.github.io/FourTwentyAnalytics/">‚Üê Back to Hub</a>
      </div>
    </div>

    <div class="card">
      <p><strong>Before we dive in:</strong> if you‚Äôd like to follow along, click <em>Start Demo</em>. I‚Äôll keep this to <strong>60‚Äì120 seconds</strong> and then pause.</p>
      <div class="grid">
        <button class="btn btn-cta" type="button" onclick="showSplash()">‚ñ∂ Start Demo</button>
        <div class="muted">Backup anchors: <a href="https://github.com/zbreeden/bank-model/blob/main/README.md#demo-start">README #demo-start</a></div>
      </div>
    </div>

    <!-- Mission Splash -->
    <div id="splash" class="overlay" role="dialog" aria-modal="true" aria-label="Mission overlay">
      <div class="overlay-card">
        <h2>General Electric Credit Union</h2>
        <p class="lead">‚ÄúImproving the Quality of Financial Lives.‚Äù</p>
        <p class="sub">Member-owned, not-for-profit credit union rooted in Greater Cincinnati.</p>
        <div class="row">
          <button class="btn btn-cta" type="button" onclick="continueToElevator()">Continue ‚Üí Elevator Pitch</button>
          <button class="btn" type="button" onclick="closeSplash()">Skip</button>
        </div>
      </div>
    </div>

    <!-- Toolkit Spotlight -->
    <div id="toolkit" class="overlay" role="dialog" aria-modal="true" aria-label="Toolkit spotlight">
      <div class="overlay-card">
        <h2>Delivery Toolkit</h2>
        <p class="lead">Four simple levers that keep flow predictable.</p>
        <div class="toolkit-list">
          <div class="toolkit-item"><b>üì¶ WIP caps</b>Limit in-flight to avoid long queues. Stop starting, start finishing.</div>
          <div class="toolkit-item"><b>‚è±Ô∏è Lead/Cycle time</b>Shorten end-to-end and stage waits; measure with timestamps.</div>
          <div class="toolkit-item"><b>üìà Throughput</b>Steady completions per week reveal capacity and trends.</div>
          <div class="toolkit-item"><b>üõ°Ô∏è Defect escape</b>Light pre-promote harness trims rework and hotfixes.</div>
        </div>
        <div class="row">
          <!-- CHANGED: opens synthesized dashboard first -->
          <button class="btn btn-cta" type="button" onclick="closeToolkit();showDash()">Ignite Dashboard ‚Üí</button>
          <button class="btn" type="button" onclick="closeToolkit();skipDash()">Skip</button>
        </div>
      </div>
    </div>

    <!-- Synthesized Dashboard (NEW) -->
    <div id="dash" class="overlay" role="dialog" aria-modal="true" aria-label="Dashboard preview">
      <div class="overlay-card">
        <h2>Delivery Dashboard (Synthetic)</h2>
        <p class="sub">Illustrative metrics ‚Äî patterns mirror real flows. No production data.</p>

        <div class="dash-grid">
          <div id="kpi-wip" class="kpi">
            <div class="label">WIP vs Cap</div>
            <div class="value">26 / 24</div>
            <div class="subv">Under for 4 of last 7 days</div>
          </div>
          <div id="kpi-lead" class="kpi">
            <div class="label">Lead Time (end-to-end)</div>
            <div class="value">3.1 days</div>
            <div class="subv">Target ‚â§ 2.5d</div>
          </div>
          <div id="kpi-throughput" class="kpi">
            <div class="label">Throughput</div>
            <div class="value">12/wk</div>
            <div class="subv">Stable (¬±1)</div>
          </div>
          <div id="kpi-escape" class="kpi">
            <div class="label">Defect Escape</div>
            <div class="value">2.0%</div>
            <div class="subv">Pre-promote harness live</div>
          </div>
        </div>

        <div class="dash-rows">
          <div class="card mini">
            <b>Stage Duration (days)</b>
            <div id="stage-bars" class="bars">
              <!-- populated by JS -->
            </div>
          </div>
          <div class="card mini">
            <b>WIP vs Cap (last 12 points)</b>
            <svg class="spark" viewBox="0 0 330 46" preserveAspectRatio="none" aria-label="WIP sparkline">
              <path id="spark-path" d="M 6,36 34,30 62,28 90,24 118,26 146,22 174,20 202,22 230,26 258,28 286,30 314,32"></path>
            </svg>
            <div class="legend"><span>WIP</span><span>Cap: 24</span></div>
          </div>
        </div>

        <div class="row">
          <button class="btn btn-cta" type="button" onclick="continueFromDash()">Continue ‚Üí Delivery Toolkit</button>
          <button class="btn" type="button" onclick="skipDash()">Skip</button>
        </div>
      </div>
    </div>

    <!-- Theater overlay for "lights on" -->
    <div id="theater" class="theater" aria-hidden="true"></div>

    <!-- Demo flow -->
    <section id="demo-start" aria-labelledby="demo-start-h">
      <h2 id="demo-start-h">Demo Start</h2>
      <div class="card">
        <p><strong>Agenda (‚âà5 min):</strong> 3-min delivery snapshot ‚Üí 2-min <em>The Bank</em> demo ‚Üí Q&amp;A.</p>
        <p class="muted">Note: dashboard uses <strong>synthetic data</strong>; patterns mirror real workflows.</p>
        <p><a class="btn" href="#elevator" onclick="go('elevator');return false;">Next ‚Üí Elevator Pitch</a></p>
      </div>
    </section>

    <section id="elevator" aria-labelledby="elevator-h">
      <h2 id="elevator-h">Elevator Pitch</h2>
      <div class="card">
        <p><strong>BLUF:</strong> I stabilize delivery via <strong>WIP caps</strong>, <strong>lead/cycle time</strong>, <strong>throughput</strong>, and <strong>defect escape</strong>.</p>
        <ul>
          <li>When <strong>WIP &gt; cap</strong> for 3+ days, <em>lead time spikes</em> ‚Üí stop-starting, start-finishing.</li>
          <li>If <strong>Review</strong> is the longest wait ‚Üí fix policy: clear <em>entry/exit</em>, fewer handoffs, smaller batches.</li>
          <li><strong>QA harness</strong> (schema/null/dupe) before promote ‚Üí rework drops without killing throughput.</li>
        </ul>
        <p>
          <!-- now opens Toolkit spotlight, then the Dashboard overlay -->
          <button class="btn" type="button" onclick="showToolkit()">Next ‚Üí Delivery Toolkit Snapshot</button>
          <a class="btn" href="#demo-start" onclick="go('demo-start');return false;">Back ‚Üë</a>
        </p>
      </div>
    </section>

    <section id="delivery-toolkit" aria-labelledby="delivery-toolkit-h">
      <h2 id="delivery-toolkit-h">Delivery Toolkit Snapshot</h2>
      <div class="card">
        <ul>
          <li><strong>WIP caps</strong> to keep flow stable (stop-starting, start-finishing).</li>
          <li><strong>Lead/cycle time</strong> visible and time-boxed.</li>
          <li><strong>Throughput</strong> tracked at steady cadence.</li>
          <li><strong>Defect escape</strong> reduced via a lightweight <em>QA harness</em>.</li>
        </ul>
        <p>
          <button class="btn" type="button" onclick="igniteAndGo('bank-3-scene')">Next ‚Üí The Bank: 3-Scene Demo</button>
          <a class="btn" href="#elevator" onclick="go('elevator');return false;">Back ‚Üë</a>
        </p>
      </div>
    </section>

    <section id="bank-3-scene" aria-labelledby="bank-3-scene-h">
      <h2 id="bank-3-scene-h">The Bank ‚Äî 3-Scene Demo</h2>
      <div class="card">
        <ol>
          <li><strong>Heartbeat:</strong> WIP vs cap ‚Üí if breached 3+ days, re-prioritize.</li>
          <li><strong>Bottleneck:</strong> Stage-duration view ‚Üí longest wait gets a policy fix.</li>
          <li><strong>Quality:</strong> Defect escape / rework% ‚Üí pre-promote QA harness.</li>
        </ol>
        <p><a class="btn" href="#qa-wrap" onclick="go('qa-wrap');return false;">Next ‚Üí Q&amp;A &amp; Wrap</a> <a class="btn" href="#delivery-toolkit" onclick="go('delivery-toolkit');return false;">Back ‚Üë</a></p>
      </div>
    </section>

    <section id="qa-wrap" aria-labelledby="qa-wrap-h">
      <h2 id="qa-wrap-h">Q&amp;A and Wrap</h2>
      <div class="card">
        <ul>
          <li>90-day success metrics?</li>
          <li>Where does work stall today (intake, review, UAT)?</li>
          <li>Toolchain &amp; request flow (SQL/PBI/Git)?</li>
          <li>Relief valve when WIP &gt; cap?</li>
          <li>Member-impact tie-back?</li>
        </ul>
        <p><strong>Pilot ask:</strong> ‚ÄúI can baseline your flow (WIP/lead-time + QA gate) in one sprint.‚Äù</p>
        <p><a class="btn" href="#demo-start" onclick="go('demo-start');return false;">Back to Start ‚Üë</a></p>
      </div>
    </section>

    <p class="muted" style="margin-top:24px">¬© FourTwenty Analytics</p>
  </div>
</body>
</html>
